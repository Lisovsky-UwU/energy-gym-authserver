"use strict";(self["webpackChunkenergy_gym_front"]=self["webpackChunkenergy_gym_front"]||[]).push([[407],{3857:function(t,e,s){s.d(e,{Z:function(){return C}});var r=s(4562),i=s(1831),a=s(7423),n=function(){var t=this,e=t._self._c;return e(i.Z,{attrs:{transition:"scroll-y-transition","close-on-content-click":!1,top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(r.Z,t._g(t._b({staticClass:"mt-2 white--text",attrs:{color:"primary"}},"v-btn",i,!1),s),[t._v(" "+t._s(t.selected_group)+" ")])]}}]),model:{value:t.group_selector_vis,callback:function(e){t.group_selector_vis=e},expression:"group_selector_vis"}},[e(a.Z,{attrs:{width:"300","max-height":"300"}},[e("GroupSelector",{on:{onSelectGroup:t.onUpdateGroup,close:function(e){t.group_selector_vis=!1}}})],1)],1)},o=[],l=s(266),c=s(1713),p=s(535),u=s(5157),h=s(6646),d=function(){var t=this,e=t._self._c;return e(p.Z,{attrs:{"min-height":"300"},model:{value:t.selected_step,callback:function(e){t.selected_step=e},expression:"selected_step"}},[e(h.gd,[e(u.Z,{attrs:{step:"1"}},[t._l(t.group_list,(function(s,i){return e(c.Z,{key:i,attrs:{"no-gutters":""}},[e(l.Z,{attrs:{align:"center"}},[e(r.Z,{staticClass:"mt-1 mb-2",on:{click:function(e){return t.select_institute(s)}}},[t._v(" "+t._s(i)+" ")])],1)],1)})),e(c.Z,{attrs:{"no-gutters":""}},[e(l.Z,{attrs:{align:"center"}},[e(r.Z,{staticClass:"mt-1 mb-2",attrs:{color:"primary"},on:{click:function(e){return t.$emit("close")}}},[t._v(" Закрыть ")])],1)],1)],2),e(u.Z,{attrs:{step:"2"}},[t._l(t.visible_courses,(function(s,i){return e(c.Z,{key:i,attrs:{"no-gutters":""}},[e(l.Z,{attrs:{align:"center"}},[e(r.Z,{staticClass:"mt-1 mb-2",on:{click:function(e){return t.select_course(s)}}},[t._v(" "+t._s(i)+" ")])],1)],1)})),e(c.Z,{attrs:{"no-gutters":""}},[e(l.Z,{attrs:{align:"center"}},[e(r.Z,{staticClass:"mt-1 mb-2",attrs:{color:"primary"},on:{click:function(e){t.selected_step=1}}},[t._v(" Назад ")])],1)],1)],2),e(u.Z,{attrs:{step:"3"}},[t._l(t.visible_gropus,(function(s){return e(c.Z,{key:s,attrs:{"no-gutters":""}},[e(l.Z,{attrs:{align:"center"}},[e(r.Z,{staticClass:"mt-1 mb-2",on:{click:function(e){return t.select_group(s)}}},[t._v(" "+t._s(s)+" ")])],1)],1)})),e(c.Z,{attrs:{"no-gutters":""}},[e(l.Z,{attrs:{align:"center"}},[e(r.Z,{staticClass:"mt-1 mb-2",attrs:{color:"primary"},on:{click:function(e){t.selected_step=2}}},[t._v(" Назад ")])],1)],1)],2)],1)],1)},v=[],m=s(629),g={data(){return{selected_step:null,visible_courses:{},visible_gropus:{},selected_institute:""}},computed:{...(0,m.Se)(["group_list"])},methods:{select_institute(t){this.visible_courses=t,this.selected_step=2},select_course(t){this.visible_gropus=t,this.selected_step=3},select_group(t){this.$emit("onSelectGroup",t),this.selected_step=1}}},_=g,Z=s(3736),f=(0,Z.Z)(_,d,v,!1,null,null,null),w=f.exports,b={data:()=>({group_selector_vis:!1}),props:["selected_group"],methods:{onUpdateGroup(t){this.selected_group=t,this.group_selector_vis=!1,this.$emit("changeGroup",t)}},components:{GroupSelector:w}},k=b,y=(0,Z.Z)(k,n,o,!1,null,null,null),C=y.exports},6407:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var r=s(4562),i=s(4145),a=s(4886),n=s(266),o=s(2118),l=s(9223),c=s(1713),p=s(7808),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mt-10",staticStyle:{height:"calc(100% - 40px)"}},[e(i.Z,{staticClass:"mx-15 rounded-lg",attrs:{height:"100%",color:"element_background"}},[e(a.EB,{staticClass:"background_color_second white--text"},[e(c.Z,{attrs:{align:"center","no-gutters":""}},[e(n.Z,[e("h2",{staticStyle:{"font-weight":"lighter"}},[t._v("Настройки профиля")])])],1)],1),e(a.ZB,{staticClass:"pa-0",staticStyle:{height:"calc(100% - 64px)"}},[e(o.Z,{staticClass:"overflow-y-auto",staticStyle:{"max-height":"400px"},attrs:{id:"scroll-target"}},[e(c.Z,[e(n.Z,[e("h2",[t._v("Основная информация")])])],1),e(c.Z,{attrs:{"no-gutters":""}},[e(n.Z,[e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Фамилия",required:"",rules:[t.requiredFieldRule]},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}})],1),e(n.Z,[e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Имя",required:"",rules:[t.requiredFieldRule]},model:{value:t.secondname,callback:function(e){t.secondname=e},expression:"secondname"}})],1)],1),e(c.Z,{attrs:{"no-gutters":""}},[e(n.Z,[e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Отчество",required:"",rules:[t.requiredFieldRule]},model:{value:t.surname,callback:function(e){t.surname=e},expression:"surname"}})],1),e(n.Z,["Тренер"!=t.userData.status?e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Номер студенческого билета",readonly:""},model:{value:t.studCard,callback:function(e){t.studCard=e},expression:"studCard"}}):t._e()],1)],1),e(c.Z,{attrs:{"no-gutters":""}},[e(n.Z,["Тренер"!=t.userData.status?[e("div",{staticClass:"mt-1"},[t._v(" Группа: ")]),e("GroupSelectorBtn",{attrs:{selected_group:t.usergroup},on:{changeGroup:t.changeGroup}})]:t._e()],2),e(n.Z,[e("div",{staticClass:"mt-1"},[t._v(" Фото профиля: ")]),e(r.Z,{staticClass:"mt-2 white--text",attrs:{color:"menu_btn_1"},on:{click:t.uploadPhoto}},[t._v(" Выбрать фото ")])],1)],1),e(c.Z,[e(n.Z,[e(r.Z,{staticClass:"white--text",attrs:{color:"green",loading:t.dataSaveLoading},on:{click:t.updateUserData}},[t._v(" Сохранить изменения ")])],1)],1),e(l.Z,{staticClass:"my-5"}),e(c.Z,[e(n.Z,[e("h2",[t._v("Сменить пароль")])])],1),e(c.Z,{attrs:{"no-gutters":""}},[e(n.Z,[e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Прежний пароль",required:"",type:"password",rules:[t.requiredFieldRule,t.passwordFieldRule]},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}})],1),e(n.Z,[e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Новый пароль",required:"",type:"password",rules:[t.requiredFieldRule,t.passwordFieldRule]},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}})],1)],1),e(c.Z,{attrs:{"no-gutters":""}},[e(n.Z,[e(p.Z,{staticClass:"mt-2 mx-3",attrs:{label:"Повторите новый пароль",required:"",type:"password",rules:[t.requiredFieldRule,()=>t.newPassword==t.repeatNewPassword||"Пароли не совпадают"]},model:{value:t.repeatNewPassword,callback:function(e){t.repeatNewPassword=e},expression:"repeatNewPassword"}})],1),e(n.Z,[e(r.Z,{staticClass:"white--text mt-4",attrs:{color:"green",loading:t.passwordSaveLoading},on:{click:t.updateUserPassword}},[t._v(" Сменить пароль ")])],1)],1)],1)],1)],1)],1)},h=[],d=s(3857),v=s(629),m={data:()=>({dataSaveLoading:!1,passwordSaveLoading:!1,valid:!1,firstname:"",secondname:"",surname:"",studCard:"",oldPassword:"",newPassword:"",repeatNewPassword:"",usergroup:"",requiredFieldRule:t=>!!t||"Поле обязательно",passwordFieldRule:t=>t.length>=8&&t.length<=64||"Допустимая длина от 8 до 64 символов"}),methods:{changeGroup(t){this.usergroup=t},uploadPhoto(){this.$store.commit("showSnackbarWarning","Функция находится в разработке")},async updateUserData(){this.dataSaveLoading=!0,await this.$store.dispatch("pushJsonData",{endpoint:"/user/edit",body:{firstname:this.firstname,secondname:this.secondname,surname:this.surname,group:this.group},method:"PUT"}),this.$store.commit("showSnackbarSuccess","Данные успешно обновлены"),this.dataSaveLoading=!1},async updateUserPassword(){this.passwordSaveLoading=!0;try{await this.$store.dispatch("pushJsonData",{endpoint:"/user/edit-password",body:{old_password:this.oldPassword,new_password:this.newPassword},method:"PUT",saveData:!1}),this.$store.commit("showSnackbarSuccess","Пароль успешно изменен"),this.oldPassword="",this.newPassword="",this.repeatNewPassword=""}catch{this.$store.commit("showSnackbarError","Неверный прежний пароль")}this.passwordSaveLoading=!1}},computed:{...(0,v.Se)(["userData"])},components:{GroupSelectorBtn:d.Z},mounted(){this.firstname=this.userData["firstname"],this.secondname=this.userData["secondname"],this.surname=this.userData["surname"],this.usergroup=this.userData["group"],this.studCard=this.userData["student_card"]}},g=m,_=s(3736),Z=(0,_.Z)(g,u,h,!1,null,null,null),f=Z.exports},9223:function(t,e,s){s.d(e,{Z:function(){return i}});var r=s(6669),i=r.Z.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(t){let e;return this.$attrs.role&&"separator"!==this.$attrs.role||(e=this.vertical?"vertical":"horizontal"),t("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":e,...this.$attrs},on:this.$listeners})}})},535:function(t,e,s){s.d(e,{Z:function(){return c}});s(7658);var r=s(3434),i=s(4712),a=s(3457),n=s(7678),o=s(4101);const l=(0,n.Z)(r.Z,(0,i.J)("stepper"),a.Z);var c=l.extend({name:"v-stepper",provide(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{altLabels:Boolean,nonLinear:Boolean,flat:Boolean,vertical:Boolean},data(){const t={isBooted:!1,steps:[],content:[],isReverse:!1};return t.internalLazyValue=null!=this.value?this.value:(t[0]||{}).step||1,t},computed:{classes(){return{"v-stepper--flat":this.flat,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear,...r.Z.options.computed.classes.call(this)}},styles(){return{...r.Z.options.computed.styles.call(this)}}},watch:{internalValue(t,e){this.isReverse=Number(t)<Number(e),e&&(this.isBooted=!0),this.updateView()}},created(){this.$listeners.input&&(0,o.fK)("@input","@change",this)},mounted(){this.updateView()},methods:{register(t){"v-stepper-step"===t.$options.name?this.steps.push(t):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content.push(t))},unregister(t){"v-stepper-step"===t.$options.name?this.steps=this.steps.filter((e=>e!==t)):"v-stepper-content"===t.$options.name&&(t.isVertical=this.vertical,this.content=this.content.filter((e=>e!==t)))},stepClick(t){this.$nextTick((()=>this.internalValue=t))},updateView(){for(let t=this.steps.length;--t>=0;)this.steps[t].toggle(this.internalValue);for(let t=this.content.length;--t>=0;)this.content[t].toggle(this.internalValue,this.isReverse)}},render(t){return t(this.tag,{staticClass:"v-stepper",class:this.classes,style:this.styles},this.$slots.default)}})},5157:function(t,e,s){var r=s(7394),i=s(4712),a=s(5352),n=s(7678);const o=(0,n.Z)((0,i.f)("stepper","v-stepper-content","v-stepper"));e["Z"]=o.extend().extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{computedTransition(){const t=this.$vuetify.rtl?!this.isReverse:this.isReverse;return t?r.YV:r.n6},styles(){return this.isVertical?{height:(0,a.kb)(this.height)}:{}}},watch:{isActive(t,e){t&&null==e?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition(t){this.isActive&&"height"===t.propertyName&&(this.height="auto")},enter(){let t=0;requestAnimationFrame((()=>{t=this.$refs.wrapper.scrollHeight})),this.height=0,setTimeout((()=>this.isActive&&(this.height=t||"auto")),450)},leave(){this.height=this.$refs.wrapper.clientHeight,setTimeout((()=>this.height=0),10)},toggle(t,e){this.isActive=t.toString()===this.step.toString(),this.isReverse=e}},render(t){const e={staticClass:"v-stepper__content"},s={staticClass:"v-stepper__wrapper",style:this.styles,ref:"wrapper"};this.isVertical||(e.directives=[{name:"show",value:this.isActive}]);const r=t("div",s,[this.$slots.default]),i=t("div",e,[r]);return t(this.computedTransition,{on:this.$listeners},[i])}})},6646:function(t,e,s){s.d(e,{gd:function(){return v}});var r=s(5352),i=s(535),a=(s(7658),s(2240)),n=s(6878),o=s(4712),l=s(7069),c=s(7678);const p=(0,c.Z)(n.Z,(0,o.f)("stepper","v-stepper-step","v-stepper"));var u=p.extend().extend({name:"v-stepper-step",directives:{ripple:l.Z},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$complete"},editable:Boolean,editIcon:{type:String,default:"$edit"},errorIcon:{type:String,default:"$error"},rules:{type:Array,default:()=>[]},step:[Number,String]},data(){return{isActive:!1,isInactive:!0}},computed:{classes(){return{"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error error--text":this.hasError,"v-stepper__step--complete":this.complete}},hasError(){return this.rules.some((t=>!0!==t()))}},mounted(){this.stepper&&this.stepper.register(this)},beforeDestroy(){this.stepper&&this.stepper.unregister(this)},methods:{click(t){t.stopPropagation(),this.$emit("click",t),this.editable&&this.stepClick(this.step)},genIcon(t){return this.$createElement(a.Z,t)},genLabel(){return this.$createElement("div",{staticClass:"v-stepper__label"},this.$slots.default)},genStep(){const t=!(this.hasError||!this.complete&&!this.isActive)&&this.color;return this.$createElement("span",this.setBackgroundColor(t,{staticClass:"v-stepper__step__step"}),this.genStepContent())},genStepContent(){const t=[];return this.hasError?t.push(this.genIcon(this.errorIcon)):this.complete?this.editable?t.push(this.genIcon(this.editIcon)):t.push(this.genIcon(this.completeIcon)):t.push(String(this.step)),t},keyboardClick(t){t.keyCode===r.Do.space&&this.click(t)},toggle(t){this.isActive=t.toString()===this.step.toString(),this.isInactive=Number(t)<Number(this.step)}},render(t){return t("div",{attrs:{tabindex:this.editable?0:-1},staticClass:"v-stepper__step",class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click,keydown:this.keyboardClick}},[this.genStep(),this.genLabel()])}}),h=s(5157);const d=(0,r.Ji)("v-stepper__header"),v=(0,r.Ji)("v-stepper__items");i.Z,h.Z}}]);
//# sourceMappingURL=407.e3d58ebd.js.map