import{d as h,l as x,r as c,m as g,a as m,s as p,w as k,b as s,e as t,n as w,g as f,f as V,q as C}from"./index-689e3db1.js";import{M as S}from"./MainBlockLkTemplate-737e69f1.js";import{U as n}from"./Input-ef82b485.js";import{L as b}from"./LoadingSmall-8ea7b7e5.js";import{u as N}from"./user-7dab814b.js";import"./_plugin-vue_export-helper-c27b6911.js";const D={class:"p-4 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 min-h-[500px] gap-3 lg:min-h-0"},T={class:"flex place-items-center justify-center"},B=["disabled"],I=s("hr",{class:"lg:col-span-2 mt-4",noshade:"",style:{height:"2px"}},null,-1),_=s("span",{class:"lg:col-span-2 text-center text-xl"}," Смена пароля ",-1),q={class:"flex place-items-center justify-center"},R=["disabled"],F=h({__name:"ProfileSettings",setup(j){const i=N(),P=x(),r=c(!1),u=c(!1),a=g({...i.userData}),o=g({oldPassword:"",newPassword:"",newPasswordRepeat:""});function y(){if(o.newPassword!=o.newPasswordRepeat){P.showError("Новый пароль не совпадает");return}r.value=!0,i.changePassword(o.oldPassword,o.newPassword,"STUDENT").finally(()=>{r.value=!1})}function v(){const d=document.getElementById("fileInput");d==null||d.click()}function U(d){u.value=!0,i.loadNewPhoto(d,"STUDENT").finally(()=>{u.value=!1})}return(d,e)=>(m(),p(S,{title:"Настройки профиля"},{default:k(()=>[s("div",D,[t(n,{label:"Фамилия",modelValue:a.secondname,"onUpdate:modelValue":e[0]||(e[0]=l=>a.secondname=l),readonly:""},null,8,["modelValue"]),t(n,{label:"Имя",modelValue:a.firstname,"onUpdate:modelValue":e[1]||(e[1]=l=>a.firstname=l),readonly:""},null,8,["modelValue"]),t(n,{label:"Отчество",modelValue:a.surname,"onUpdate:modelValue":e[2]||(e[2]=l=>a.surname=l),readonly:""},null,8,["modelValue"]),t(n,{label:"Студенческий билет",modelValue:a.studentCard,"onUpdate:modelValue":e[3]||(e[3]=l=>a.studentCard=l),readonly:""},null,8,["modelValue"]),t(n,{label:"Группа",modelValue:a.group,"onUpdate:modelValue":e[4]||(e[4]=l=>a.group=l),readonly:""},null,8,["modelValue"]),s("div",T,[s("input",{type:"file",id:"fileInput",hidden:"",onChange:U,accept:".jpg,.png,.bmp"},null,32),s("button",{disabled:u.value,class:w([u.value?"btn-custom-load":"btn-custom","btn-custom"]),onClick:v},[u.value?(m(),p(b,{key:0})):f("",!0),V(" Выбрать фото ")],10,B)]),I,_,s("form",{class:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-3",onSubmit:e[8]||(e[8]=C(l=>y(),["prevent"]))},[t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Новый пароль",modelValue:o.newPassword,"onUpdate:modelValue":e[5]||(e[5]=l=>o.newPassword=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Повторите новый пароль",modelValue:o.newPasswordRepeat,"onUpdate:modelValue":e[6]||(e[6]=l=>o.newPasswordRepeat=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Прежний пароль",modelValue:o.oldPassword,"onUpdate:modelValue":e[7]||(e[7]=l=>o.oldPassword=l)},null,8,["modelValue"]),s("div",q,[s("button",{disabled:r.value,class:w(r.value?"btn-custom-load":"btn-custom"),type:"submit"},[r.value?(m(),p(b,{key:0})):f("",!0),V(" Сменить пароль ")],10,R)])],32)])]),_:1}))}});export{F as default};
