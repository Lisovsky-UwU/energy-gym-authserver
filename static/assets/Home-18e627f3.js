import{d as V,r as i,v as L,o as j,a as s,c as a,b as e,y as B,z as F,e as r,u as l,F as g,h as k,f,w as $,C as U,t as u,g as C,n as D,s as z}from"./index-d7d45e2a.js";import{u as R,M as A}from"./news-9ed1ee18.js";import{L as E}from"./Loading-e76d4d20.js";import{L as G}from"./LoadingSmall-d4448cd8.js";import{g as H,S as y,h as I,i as q}from"./mdi-24228410.js";import{u as J}from"./entry-90a42a53.js";import{w as N}from"./Common-654e7287.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./api-a7f55192.js";import"./user-f854f47d.js";const K={class:"sm:h-full flex flex-col lg:flex-row gap-5 sm:gap-14 min-w-64"},O={class:"basis-1/2 bg-background rounded-md flex flex-col gap-4 p-4 overflow-visible sm:overflow-auto min-h-72"},P={class:"flex flex-row gap-3"},Q=e("span",{class:"text-nowrap text-xl p-1"},"Месяц:",-1),W=e("option",{value:"current"},"Текущий",-1),X=e("option",{value:"next"},"Следующий",-1),Y=[W,X],Z={key:0,class:"w-full h-full place-items-center flex justify-center text-xl text-center"},ee={key:1,class:"flex flex-col gap-2"},te={class:"p-2 bg-second rounded-md"},le={class:"w-full text-center p-1"},se=["onClick"],ae={key:2,class:"w-full min-h-72 h-full place-items-center gap-3 flex flex-col justify-center text-2xl text-center"},oe={class:"basis-1/2 bg-background rounded-md flex flex-col gap-4 p-4 overflow-auto min-h-72 mb-10 sm:mb-0"},ne={key:0,class:"w-full h-full place-items-center flex justify-center text-xl text-center"},de={class:"new-block-forward"},ie=e("br",null,null,-1),re={key:2,class:"w-full min-h-72 h-full place-items-center gap-3 flex flex-col justify-center text-2xl text-center"},ce={class:"flex flex-col gap-6 pt-5 px-6 pb-3 rounded-md bg-background"},ue={class:"text-2xl"},me={class:"flex place-content-center gap-2"},pe=["disabled"],fe=["disabled"],Ne=V({__name:"Home",setup(ve){const m=J(),h=R(),c=i("current"),v=i(new Date),w=i(!0),b=i(!0),n=i(!1),p=i(!1),x=i({}),M=L(()=>[...m.forCallendarMapped.map(d=>({dates:d.dates,highlight:"selected-color",popover:{label:d.description}})),{dates:new Date,highlight:"today-color"}]);j(()=>{_(),h.loadGymNews("STUDENT").finally(()=>{b.value=!1})});function _(){if(w.value=!0,c.value=="current")v.value=new Date;else if(c.value=="next"){let d=new Date;v.value.setMonth(d.getMonth()+1)}m.loadMyEntries(c.value).finally(()=>{w.value=!1})}function S(d){x.value=d,p.value=!0}function T(){n.value=!0,m.deleteMyEntry(x.value.id).then(()=>{p.value=!1,_()}).finally(()=>{n.value=!1})}return(d,o)=>(s(),a(g,null,[e("div",K,[e("div",O,[e("div",P,[Q,B(e("select",{class:"text-white rounded-md py-2 px-4 bg-second shadow-md w-full","onUpdate:modelValue":o[0]||(o[0]=t=>c.value=t),onChange:o[1]||(o[1]=t=>_())},Y,544),[[F,c.value]])]),w.value?(s(),a("div",Z,[r(E)])):l(m).myEntries.length>0?(s(),a("div",ee,[e("div",te,[r(l(U),{expanded:"","min-date":v.value,"max-date":v.value,class:"w-full",transparent:"",borderless:"","is-dark":"",attributes:M.value},null,8,["min-date","max-date","attributes"])]),(s(!0),a(g,null,k(l(m).myEntries,t=>(s(),a("div",{key:t.id,class:"bg-second rounded-md shadow-md text-white text-center flex flex-row p-2"},[e("span",le,u(l(N)[t.selectedTime.weekday])+": "+u(t.selectedTime.time),1),c.value=="next"?(s(),a("button",{key:0,title:"Удалить объявление",class:"hover:bg-white hover:bg-opacity-15 transition-all rounded-md px-2",onClick:xe=>S(t)},[r(l(y),{class:"h-6 w-6",type:"mdi",path:l(H)},null,8,["path"])],8,se)):C("",!0)]))),128))])):(s(),a("div",ae,[r(l(y),{class:"text-primary h-20 w-20",type:"mdi",path:l(I)},null,8,["path"]),f(" У вас отсутствуют записи ")]))]),e("div",oe,[b.value?(s(),a("div",ne,[r(E)])):l(h).gymNews.length>0?(s(!0),a(g,{key:1},k(l(h).gymNews,t=>(s(),a("div",{key:t.id,class:"new-block-back"},[e("div",de,[f(" От: "+u(t.createTime)+" ",1),ie,f(" "+u(t.body),1)])]))),128)):(s(),a("div",re,[r(l(y),{class:"text-tertiary h-20 w-20",type:"mdi",path:l(q)},null,8,["path"]),f(" Объявления отсутствуют ")]))])]),r(A,{modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=t=>p.value=t)},{default:$(()=>[e("div",ce,[e("span",ue," Вы уверены что хотите удалить запись на "+u(l(N)[x.value.selectedTime.weekday])+": "+u(x.value.selectedTime.time)+"? ",1),e("div",me,[e("button",{disabled:n.value,class:D(["text-white text-xl px-6 py-2 rounded-md transition-all bg-red-600",n.value?"":"hover:bg-red-400"]),onClick:o[2]||(o[2]=t=>T())},[n.value?(s(),z(G,{key:0})):C("",!0),f(" Удалить ")],10,pe),e("button",{disabled:n.value,class:D(["text-white text-xl px-6 py-2 rounded-md transition-all bg-second",n.value?"":"hover:bg-slate-600"]),onClick:o[3]||(o[3]=t=>p.value=!1)}," Отмена ",10,fe)])])]),_:1},8,["modelValue"])],64))}});export{Ne as default};
