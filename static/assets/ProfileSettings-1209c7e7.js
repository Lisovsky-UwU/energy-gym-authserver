import{d as y,l as x,r as p,m as c,a as i,s as m,w as C,b as s,e as t,n as w,g,f,q as U}from"./index-61c05336.js";import{M as h}from"./MainBlockLkTemplate-535abec3.js";import{U as n}from"./Input-07a4c0ad.js";import{L as V}from"./LoadingSmall-42e329e9.js";import{u as k}from"./user-a74740c1.js";import"./_plugin-vue_export-helper-c27b6911.js";const S={class:"p-4 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 min-h-[500px] gap-3 lg:min-h-0"},_=s("div",{class:"flex place-items-center justify-center lg:col-span-2"},[s("button",{class:"btn-custom"}," Выбрать фото ")],-1),D={class:"lg:col-span-2 flex place-items-center justify-center"},q=["disabled"],B=s("hr",{class:"lg:col-span-2 mt-4",noshade:"",style:{height:"2px"}},null,-1),N=s("span",{class:"lg:col-span-2 text-center text-xl"}," Смена пароля ",-1),R={class:"flex place-items-center justify-center"},j=["disabled"],E=y({__name:"ProfileSettings",setup(L){const u=k(),b=x(),d=p(!1),r=p(!1),o=c({...u.userData}),a=c({oldPassword:"",newPassword:"",newPasswordRepeat:""});function v(){d.value=!0,u.update(o,"COACH").finally(()=>{d.value=!1})}function P(){if(a.newPassword!=a.newPasswordRepeat){b.showError("Новый пароль не совпадает");return}r.value=!0,u.changePassword(a.oldPassword,a.newPassword,"COACH").finally(()=>{r.value=!1})}return(M,e)=>(i(),m(h,{title:"Настройки профиля"},{default:C(()=>[s("div",S,[t(n,{label:"Фамилия",modelValue:o.secondname,"onUpdate:modelValue":e[0]||(e[0]=l=>o.secondname=l)},null,8,["modelValue"]),t(n,{label:"Имя",modelValue:o.firstname,"onUpdate:modelValue":e[1]||(e[1]=l=>o.firstname=l)},null,8,["modelValue"]),t(n,{label:"Отчество",modelValue:o.surname,"onUpdate:modelValue":e[2]||(e[2]=l=>o.surname=l)},null,8,["modelValue"]),t(n,{label:"Логин",modelValue:o.studentCard,"onUpdate:modelValue":e[3]||(e[3]=l=>o.studentCard=l),readonly:""},null,8,["modelValue"]),_,s("div",D,[s("button",{disabled:d.value,class:w(d.value?"btn-custom-load":"btn-custom"),onClick:e[4]||(e[4]=l=>v())},[d.value?(i(),m(V,{key:0})):g("",!0),f(" Сохранить изменения ")],10,q)]),B,N,s("form",{class:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-3",onSubmit:e[8]||(e[8]=U(l=>P(),["prevent"]))},[t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Новый пароль",modelValue:a.newPassword,"onUpdate:modelValue":e[5]||(e[5]=l=>a.newPassword=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Повторите новый пароль",modelValue:a.newPasswordRepeat,"onUpdate:modelValue":e[6]||(e[6]=l=>a.newPasswordRepeat=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Прежний пароль",modelValue:a.oldPassword,"onUpdate:modelValue":e[7]||(e[7]=l=>a.oldPassword=l)},null,8,["modelValue"]),s("div",R,[s("button",{disabled:r.value,class:w(r.value?"btn-custom-load":"btn-custom"),type:"submit"},[r.value?(i(),m(V,{key:0})):g("",!0),f(" Сменить пароль ")],10,j)])],32)])]),_:1}))}});export{E as default};
