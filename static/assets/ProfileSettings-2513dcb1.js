import{d as U,l as y,r as p,m as c,a as i,s as m,w as x,b as o,e as t,n as g,g as w,f,q as S}from"./index-61c05336.js";import{M as k}from"./MainBlockLkTemplate-535abec3.js";import{U as n}from"./Input-07a4c0ad.js";import{L as V}from"./LoadingSmall-42e329e9.js";import{u as C}from"./user-a74740c1.js";import"./_plugin-vue_export-helper-c27b6911.js";const D={class:"p-4 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 min-h-[500px] gap-3 lg:min-h-0"},h=o("div",{class:"flex place-items-center justify-center"},[o("button",{class:"btn-custom"}," Выбрать фото ")],-1),N={class:"lg:col-span-2 flex place-items-center justify-center"},T=["disabled"],_=o("hr",{class:"lg:col-span-2 mt-4",noshade:"",style:{height:"2px"}},null,-1),q=o("span",{class:"lg:col-span-2 text-center text-xl"}," Смена пароля ",-1),B={class:"flex place-items-center justify-center"},R=["disabled"],F=U({__name:"ProfileSettings",setup(j){const u=C(),b=y(),d=p(!1),r=p(!1),a=c({...u.userData}),s=c({oldPassword:"",newPassword:"",newPasswordRepeat:""});function v(){d.value=!0,u.update(a,"STUDENT").finally(()=>{d.value=!1})}function P(){if(s.newPassword!=s.newPasswordRepeat){b.showError("Новый пароль не совпадает");return}r.value=!0,u.changePassword(s.oldPassword,s.newPassword,"STUDENT").finally(()=>{r.value=!1})}return(E,e)=>(i(),m(k,{title:"Настройки профиля"},{default:x(()=>[o("div",D,[t(n,{label:"Фамилия",modelValue:a.secondname,"onUpdate:modelValue":e[0]||(e[0]=l=>a.secondname=l)},null,8,["modelValue"]),t(n,{label:"Имя",modelValue:a.firstname,"onUpdate:modelValue":e[1]||(e[1]=l=>a.firstname=l)},null,8,["modelValue"]),t(n,{label:"Отчество",modelValue:a.surname,"onUpdate:modelValue":e[2]||(e[2]=l=>a.surname=l)},null,8,["modelValue"]),t(n,{label:"Студенческий билет",modelValue:a.studentCard,"onUpdate:modelValue":e[3]||(e[3]=l=>a.studentCard=l),readonly:""},null,8,["modelValue"]),t(n,{label:"Группа",modelValue:a.group,"onUpdate:modelValue":e[4]||(e[4]=l=>a.group=l)},null,8,["modelValue"]),h,o("div",N,[o("button",{disabled:d.value,class:g(d.value?"btn-custom-load":"btn-custom"),onClick:e[5]||(e[5]=l=>v())},[d.value?(i(),m(V,{key:0})):w("",!0),f(" Сохранить изменения ")],10,T)]),_,q,o("form",{class:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-3",onSubmit:e[9]||(e[9]=S(l=>P(),["prevent"]))},[t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Новый пароль",modelValue:s.newPassword,"onUpdate:modelValue":e[6]||(e[6]=l=>s.newPassword=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Повторите новый пароль",modelValue:s.newPasswordRepeat,"onUpdate:modelValue":e[7]||(e[7]=l=>s.newPasswordRepeat=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Прежний пароль",modelValue:s.oldPassword,"onUpdate:modelValue":e[8]||(e[8]=l=>s.oldPassword=l)},null,8,["modelValue"]),o("div",B,[o("button",{disabled:r.value,class:g(r.value?"btn-custom-load":"btn-custom"),type:"submit"},[r.value?(i(),m(V,{key:0})):w("",!0),f(" Сменить пароль ")],10,R)])],32)])]),_:1}))}});export{F as default};
