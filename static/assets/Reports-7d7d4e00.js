import{d as b,r as d,l as y,a as c,s as m,w as g,b as t,y as u,z as k,c as U,B as f,g as v,e as V,n as R,f as S}from"./index-689e3db1.js";import{M as B}from"./MainBlockLkTemplate-737e69f1.js";import{L as C}from"./LoadingSmall-8ea7b7e5.js";import{U as D}from"./Input-ef82b485.js";import{useApiCoachStore as L}from"./api-427152fd.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./user-7dab814b.js";const N={class:"flex flex-col items-center sm:h-full sm:absolute justify-center py-6 w-full gap-3"},O={class:"flex flex-col gap-3 justify-start px-4"},j={class:"flex flex-row gap-3"},E=t("span",{class:"text-xl mt-1 text-nowrap"},"Тип отчета",-1),M=t("option",{value:"Посещения"},"Посещения",-1),T=[M],z={key:0,class:"flex flex-wrap gap-4 place-content-center"},J={class:"flex flex-row gap-2"},$=t("span",{class:"text-xl mt-2"},"От:",-1),q={class:"flex flex-row gap-2"},A=t("span",{class:"text-xl mt-2"},"До:",-1),I=["disabled"],Y=b({__name:"Reports",setup(P){const s=d(!1),i=d("Посещения"),l=d(new Date().toJSON().slice(0,10)),o=d(new Date().toJSON().slice(0,10)),r=d(""),x=L(),w=y();async function _(){if(l.value==o.value){w.showError("Выберите промежуток дат");return}let n={startDate:l.value,endDate:o.value};r.value&&(n.group=r.value),s.value=!0;try{h(await x.doRequest("/report/visits","POST",n),`Посещения с ${l.value} по ${o.value}.xlsx`)}finally{s.value=!1}}function h(n,a){var e=document.createElement("a");document.body.appendChild(e),e.style="display: none";var p=window.URL.createObjectURL(n);e.href=p,e.download=a,e.click(),window.URL.revokeObjectURL(p)}return(n,a)=>(c(),m(B,{title:"Отчеты"},{default:g(()=>[t("div",N,[t("div",O,[t("div",j,[E,u(t("select",{class:"text-white rounded-md py-2 px-4 bg-second shadow-md text-xl w-full","onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e)},T,512),[[k,i.value]])]),i.value=="Посещения"?(c(),U("div",z,[t("div",J,[$,u(t("input",{class:"bg-second text-white p-3 rounded-md shadow-md",type:"date",id:"start",name:"trip-start","onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e)},null,512),[[f,l.value]])]),t("div",q,[A,u(t("input",{class:"bg-second text-white p-3 rounded-md shadow-md",type:"date",id:"start",name:"trip-start","onUpdate:modelValue":a[2]||(a[2]=e=>o.value=e)},null,512),[[f,o.value]])])])):v("",!0),V(D,{class:"w-full",label:"Группа (необязательно)",placeholder:"БИ-42",modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=e=>r.value=e)},null,8,["modelValue"])]),t("button",{disabled:s.value,class:R([s.value?"btn-custom-load":"btn-custom","mt-4 text-xl"]),onClick:_},[s.value?(c(),m(C,{key:0})):v("",!0),S(" Сформировать ")],10,I)])]),_:1}))}});export{Y as default};
