import{d as L,l as z,r as f,m as P,j as D,a as r,c as p,b as e,e as o,w as v,n as k,q as R,s as y,g as h,f as m,p as E,k as N,u as d,t as C,R as A,o as M,v as F,x as H}from"./index-13497349.js";import{_ as U}from"./logo_without_back-5626af4c.js";import{U as _}from"./Input-512782be.js";import{L as S}from"./LoadingSmall-c082d992.js";import{useApiStudentStore as I}from"./api-c0bedf42.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as G}from"./default_avatar-05943288.js";import{S as b,a as J,b as K,c as O,d as Q,e as W,f as X}from"./mdi-744fba57.js";import{u as Y}from"./user-1ccd504c.js";import{u as Z}from"./Common-47779d4f.js";import{L as ee}from"./Loading-95ec2321.js";const V=u=>(E("data-v-37a9cbe0"),u=u(),N(),u),te={class:"h-screen bg-slate-600 background-custom"},se={class:"bg-white sm:float-right h-screen p-6 w-full sm:w-[400px]"},oe={class:"grid gap-4 grid-cols-1 content-center sm:h-full"},le=V(()=>e("img",{class:"h-56",src:U},null,-1)),ae={class:""},ne={class:"mb-4 flex space-x-4 p-2 bg-white rounded-lg shadow-md"},de=["disabled"],re=["disabled"],ie=V(()=>e("div",{class:"transition-all"},null,-1)),ue={key:0,class:"transition-all duration-300 bg-white p-4 rounded-lg shadow-md"},ce={class:""},pe=["disabled"],me={key:1,class:"transition-all duration-300 bg-white p-4 rounded-lg shadow-md"},_e={key:0},ve={class:"h-auto grid grid-cols-1"},ge={key:1},he={class:"h-auto gap-2 grid grid-cols-1"},be={key:2},fe={class:"h-auto gap-2 grid grid-cols-1"},we={class:"mt-5 flex justify-between items-center gap-x-2"},xe=["disabled"],ke=V(()=>e("svg",{class:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m15 18-6-6 6-6"})],-1)),ye=["disabled"],Ve=V(()=>e("svg",{class:"flex-shrink-0 size-4",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"m9 18 6-6-6-6"})],-1)),$e=["disabled"],Ce=L({__name:"LoginLk",setup(u){const g=I(),i=z(),l=f(!1),c=f(1),n=f(1),t=P({studentCard:null,password:"",passwordRepeat:"",firstname:"",secondname:"",surname:"",group:""}),x=f(""),$=f("");function j(){l.value=!0,g.login(x.value,$.value).finally(()=>{l.value=!1})}async function q(){if(!l.value){if(!t.studentCard){i.showError("Введите номер студенческого");return}if(n.value==1){l.value=!0;try{await g.checkStudentCard(t.studentCard)?i.showError("Номер студенческого билета уже зарегестрирован"):n.value+=1}finally{l.value=!1}}else if(n.value==2)t.password.length<8?i.showError("Длина пароля должна быть не меньше 8 символов"):t.password!=t.passwordRepeat?i.showError("Пароли не совпадают"):n.value+=1;else if(n.value==3)if(!t.firstname||!t.secondname||!t.group){i.showError("Заполните все поля: Фамилия, Имя и Группа");return}else{l.value=!0;try{await g.registrate({studentCard:t.studentCard,password:t.password,firstname:t.firstname,secondname:t.secondname,surname:t.surname,group:t.group})}finally{l.value=!1}}}}return(Ge,s)=>{const B=D("router-link");return r(),p("div",te,[e("div",se,[e("div",oe,[o(B,{to:"/",class:"justify-self-center"},{default:v(()=>[le]),_:1}),e("div",ae,[e("div",ne,[e("button",{disabled:l.value,onClick:s[0]||(s[0]=a=>c.value=1),class:k([{"bg-primary text-white":c.value===1},"flex-1 py-2 px-4 rounded-md focus:outline-none focus:shadow-outline-blue transition-all duration-300"])},"Вход",10,de),e("button",{disabled:l.value,onClick:s[1]||(s[1]=a=>c.value=2),class:k([{"bg-primary text-white":c.value===2},"flex-1 py-2 px-4 rounded-md focus:outline-none focus:shadow-outline-blue transition-all duration-300"])},"Регистрация",10,re)]),ie,c.value===1?(r(),p("div",ue,[e("form",{class:"gap-4 grid grid-cols-1",onSubmit:R(j,["prevent"])},[e("div",ce,[o(_,{label:"Студенческий билет",type:"number",placeholder:"12345678",modelValue:x.value,"onUpdate:modelValue":s[2]||(s[2]=a=>x.value=a),required:""},null,8,["modelValue"])]),e("div",null,[o(_,{type:"password",label:"Пароль",placeholder:"*******",modelValue:$.value,"onUpdate:modelValue":s[3]||(s[3]=a=>$.value=a),required:""},null,8,["modelValue"])]),e("button",{disabled:l.value,class:k(l.value?"btn-custom-load":"btn-custom"),type:"submit"},[l.value?(r(),y(S,{key:0})):h("",!0),m(" Войти ")],10,pe)],32),o(B,{to:l.value?"/lk":"/coach",class:k("bg-blue-500 text-white px-4 py-2 rounded-md transition-all text-center block mt-3 "+(l.value?"":"hover:bg-blue-400"))},{default:v(()=>[m(" Для тренера ")]),_:1},8,["to","class"])])):h("",!0),c.value===2?(r(),p("div",me,[e("form",{onSubmit:s[12]||(s[12]=R(a=>q(),["prevent"]))},[n.value==1?(r(),p("div",_e,[e("div",ve,[o(_,{label:"Студенческий билет",type:"number",placeholder:"12345678",modelValue:t.studentCard,"onUpdate:modelValue":s[4]||(s[4]=a=>t.studentCard=a)},null,8,["modelValue"])])])):h("",!0),n.value==2?(r(),p("div",ge,[e("div",he,[e("div",null,[o(_,{type:"password",label:"Придумайте пароль",placeholder:"********",modelValue:t.password,"onUpdate:modelValue":s[5]||(s[5]=a=>t.password=a)},null,8,["modelValue"])]),e("div",null,[o(_,{type:"password",label:"Подтвердите пароль",placeholder:"********",modelValue:t.passwordRepeat,"onUpdate:modelValue":s[6]||(s[6]=a=>t.passwordRepeat=a)},null,8,["modelValue"])])])])):h("",!0),n.value==3?(r(),p("div",be,[e("div",fe,[e("div",null,[o(_,{label:"Фамилия",placeholder:"Иванов",modelValue:t.secondname,"onUpdate:modelValue":s[7]||(s[7]=a=>t.secondname=a)},null,8,["modelValue"])]),e("div",null,[o(_,{label:"Имя",placeholder:"Иван",modelValue:t.firstname,"onUpdate:modelValue":s[8]||(s[8]=a=>t.firstname=a)},null,8,["modelValue"])]),e("div",null,[o(_,{label:"Отчество",placeholder:"Иванович",modelValue:t.surname,"onUpdate:modelValue":s[9]||(s[9]=a=>t.surname=a)},null,8,["modelValue"])]),e("div",null,[o(_,{label:"Группа",placeholder:"БИ-12",modelValue:t.group,"onUpdate:modelValue":s[10]||(s[10]=a=>t.group=a)},null,8,["modelValue"])])])])):h("",!0),e("div",we,[e("button",{type:"button",disabled:n.value<2,class:"py-2 px-3 inline-flex items-center gap-x-1 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none transition-all",onClick:s[11]||(s[11]=a=>n.value-=1)},[ke,m(" Назад ")],8,xe),n.value<3?(r(),p("button",{key:0,disabled:l.value,type:"submit",class:"btn-registrate-next"},[l.value?(r(),y(S,{key:0})):h("",!0),m(" Далее "),Ve],8,ye)):(r(),p("button",{key:1,disabled:l.value,type:"submit",class:"btn-registrate-next"},[l.value?(r(),y(S,{key:0})):h("",!0),m(" Зарегистрироваться ")],8,$e))])],32)])):h("",!0)])])])])}}});const Se=T(Ce,[["__scopeId","data-v-37a9cbe0"]]),w=u=>(E("data-v-b17d1c4f"),u=u(),N(),u),Le={class:"h-screen overflow-auto bg-slate-600 background-custom flex flex-col sm:flex-row p-5 lg:p-14 gap-5 sm:gap-14"},Ue=w(()=>e("img",{src:U,class:"h-12"},null,-1)),Ie=w(()=>e("p",{class:"text-[32px] font-light select-none"},"Энергия СГУГиТ",-1)),Be={class:"relative bg-background min-w-80 sm:max-w-80 rounded-md flex items-center pt-8 flex-col overflow-auto min-h-[600px] sm:min-h-0"},Re=w(()=>e("img",{src:G,alt:"default_avatar",class:"h-44"},null,-1)),De={class:"mt-4 text-center"},Ee={class:"text-lg"},Ne={class:"text-lg"},Te={class:"text-lg"},je={class:"my-4 w-full px-5 gap-3 flex flex-col"},qe={class:"flex-auto flex flex-col gap-10"},ze=w(()=>e("img",{src:U,class:"h-12"},null,-1)),Pe=w(()=>e("p",{class:"text-[32px] font-light select-none"},"Энергия СГУГиТ",-1)),Ae={class:"flex-auto overflow-visible sm:overflow-auto sm:main-block"},Me=L({__name:"StudentLk",setup(u){const g=I(),i=Y();return(l,c)=>{var t;const n=D("router-link");return r(),p("div",Le,[o(n,{to:"/",class:"bg-background rounded-md w-fit mx-auto sm:hidden flex items-center gap-5 px-5 py-2"},{default:v(()=>[Ue,Ie]),_:1}),e("div",Be,[o(n,{to:"/lk/profile-settings",class:"absolute right-5 rounded-3xl bg-second text-white p-2 shadow-md hover:bg-slate-600 transition-all"},{default:v(()=>[o(d(b),{type:"mdi",path:d(J)},null,8,["path"])]),_:1}),Re,e("div",De,[e("p",Ee,C(d(i).fullname),1),e("p",Ne,"Группа: "+C((t=d(i).userData)==null?void 0:t.group),1),e("p",Te,"Статус: "+C(d(Z)[d(i).role]),1)]),e("div",je,[o(n,{to:"/lk",class:"menu-btn bg-menu-btn-1 hover:bg-menu-btn-1-hover"},{default:v(()=>[o(d(b),{type:"mdi",path:d(K)},null,8,["path"]),m(" Главная ")]),_:1}),o(n,{to:"/lk/create-entry",class:"menu-btn bg-menu-btn-2 hover:bg-menu-btn-2-hover"},{default:v(()=>[o(d(b),{type:"mdi",path:d(O)},null,8,["path"]),m(" Записаться ")]),_:1}),o(n,{to:"/lk/coach-support",class:"menu-btn bg-menu-btn-3 hover:bg-menu-btn-3-hover"},{default:v(()=>[o(d(b),{type:"mdi",path:d(Q)},null,8,["path"]),m(" Связь с тренером ")]),_:1}),o(n,{to:"/lk/support",class:"menu-btn bg-menu-btn-4 hover:bg-menu-btn-4-hover"},{default:v(()=>[o(d(b),{type:"mdi",path:d(W)},null,8,["path"]),m(" Поддержка ")]),_:1}),e("button",{class:"menu-btn bg-menu-btn-5 hover:bg-menu-btn-5-hover",onClick:c[0]||(c[0]=x=>d(g).logout())},[o(d(b),{type:"mdi",path:d(X)},null,8,["path"]),m(" Выход ")])])]),e("div",qe,[o(n,{to:"/",class:"bg-background rounded-md w-fit mx-auto hidden sm:flex items-center gap-5 px-5 py-2"},{default:v(()=>[ze,Pe]),_:1}),e("div",Ae,[o(d(A))])])])}}});const Fe=T(Me,[["__scopeId","data-v-b17d1c4f"]]),He={key:0,class:"min-h-screen grid grid-cols-1 gap-1 place-items-center"},ot=L({__name:"BaseLkLayer",setup(u){const g=f(!0),i=I();M(()=>{i.checkLogin().finally(()=>{g.value=!1})});const l=F(()=>i.isLogin?Fe:Se);return(c,n)=>g.value?(r(),p("div",He,[o(ee)])):(r(),y(H(l.value),{key:1}))}});export{ot as default};
