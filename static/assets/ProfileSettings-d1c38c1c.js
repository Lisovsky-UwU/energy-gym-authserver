import{d as k,l as x,r as f,m as V,a as p,s as c,w as _,b as a,e as t,n as g,g as w,f as b,q as S}from"./index-d7d45e2a.js";import{M as D}from"./MainBlockLkTemplate-acedb296.js";import{U as n}from"./Input-d296cc94.js";import{L as v}from"./LoadingSmall-d4448cd8.js";import{u as N}from"./user-f854f47d.js";import"./_plugin-vue_export-helper-c27b6911.js";const B={class:"p-4 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 min-h-[500px] gap-3 lg:min-h-0"},I={class:"flex place-items-center justify-center lg:col-span-2"},j=["disabled"],q={class:"lg:col-span-2 flex place-items-center justify-center"},R=["disabled"],A=a("hr",{class:"lg:col-span-2 mt-4",noshade:"",style:{height:"2px"}},null,-1),H=a("span",{class:"lg:col-span-2 text-center text-xl"}," Смена пароля ",-1),L={class:"flex place-items-center justify-center"},M=["disabled"],J=k({__name:"ProfileSettings",setup(O){const m=N(),P=x(),r=f(!1),u=f(!1),i=f(!1),o=V({...m.userData}),s=V({oldPassword:"",newPassword:"",newPasswordRepeat:""});function y(){r.value=!0,m.update(o,"COACH").finally(()=>{r.value=!1})}function C(){if(s.newPassword!=s.newPasswordRepeat){P.showError("Новый пароль не совпадает");return}u.value=!0,m.changePassword(s.oldPassword,s.newPassword,"COACH").finally(()=>{u.value=!1})}function h(){const d=document.getElementById("fileInput");d==null||d.click()}function U(d){i.value=!0,m.loadNewPhoto(d,"COACH").finally(()=>{i.value=!1})}return(d,e)=>(p(),c(D,{title:"Настройки профиля"},{default:_(()=>[a("div",B,[t(n,{label:"Фамилия",modelValue:o.secondname,"onUpdate:modelValue":e[0]||(e[0]=l=>o.secondname=l)},null,8,["modelValue"]),t(n,{label:"Имя",modelValue:o.firstname,"onUpdate:modelValue":e[1]||(e[1]=l=>o.firstname=l)},null,8,["modelValue"]),t(n,{label:"Отчество",modelValue:o.surname,"onUpdate:modelValue":e[2]||(e[2]=l=>o.surname=l)},null,8,["modelValue"]),t(n,{label:"Логин",modelValue:o.studentCard,"onUpdate:modelValue":e[3]||(e[3]=l=>o.studentCard=l),readonly:""},null,8,["modelValue"]),a("div",I,[a("input",{type:"file",id:"fileInput",hidden:"",onChange:U,accept:".jpg,.png,.bmp"},null,32),a("button",{disabled:i.value,class:g([i.value?"btn-custom-load":"btn-custom","btn-custom"]),onClick:h},[i.value?(p(),c(v,{key:0})):w("",!0),b(" Выбрать фото ")],10,j)]),a("div",q,[a("button",{disabled:r.value,class:g(r.value?"btn-custom-load":"btn-custom"),onClick:e[4]||(e[4]=l=>y())},[r.value?(p(),c(v,{key:0})):w("",!0),b(" Сохранить изменения ")],10,R)]),A,H,a("form",{class:"lg:col-span-2 grid grid-cols-1 lg:grid-cols-2 lg:gap-4 gap-3",onSubmit:e[8]||(e[8]=S(l=>C(),["prevent"]))},[t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Новый пароль",modelValue:s.newPassword,"onUpdate:modelValue":e[5]||(e[5]=l=>s.newPassword=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Повторите новый пароль",modelValue:s.newPasswordRepeat,"onUpdate:modelValue":e[6]||(e[6]=l=>s.newPasswordRepeat=l)},null,8,["modelValue"]),t(n,{type:"password",placeholder:"*******",required:"",minlength:"8",label:"Прежний пароль",modelValue:s.oldPassword,"onUpdate:modelValue":e[7]||(e[7]=l=>s.oldPassword=l)},null,8,["modelValue"]),a("div",L,[a("button",{disabled:u.value,class:g(u.value?"btn-custom-load":"btn-custom"),type:"submit"},[u.value?(p(),c(v,{key:0})):w("",!0),b(" Сменить пароль ")],10,M)])],32)])]),_:1}))}});export{J as default};
